<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
    <extension point="org.eclipse.ui.commands">
        <category
            name="UML-RT Commands"
            description="Commands related to the PapyrusRT UML-RT implementation"
            id="org.eclipse.papyrusrt.codegen.papyrus.commands-category"/>
        <command
            name="UML-RT Code Generator"
            description="Generate code for the selected element of a UML-RT model"
            categoryId="org.eclipse.papyrusrt.codegen.papyrus.commands-category"
            id="org.eclipse.papyrusrt.codegen.papyrus.codegen"/>
        <command
              categoryId="org.eclipse.papyrusrt.codegen.papyrus.commands-category"
              description="Regenerates all code for the selected element(s) of a UML-RT model"
              id="org.eclipse.papyrusrt.codegen.papyrus.codegen.regen"
              name="UML-RT Code Generator (regenerate)">
        </command>
    </extension>

    <extension point="org.eclipse.ui.handlers">
        <handler
            commandId="org.eclipse.papyrusrt.codegen.papyrus.codegen"
            class="org.eclipse.papyrusrt.codegen.papyrus.internal.UMLRTCppCodeGen">
        </handler>
        <handler
              class="org.eclipse.papyrusrt.codegen.papyrus.internal.UMLRTCppCodeReGen"
              commandId="org.eclipse.papyrusrt.codegen.papyrus.codegen.regen">
        </handler>
    </extension>

    <extension point="org.eclipse.ui.menus">
        <menuContribution
            allPopups="true"
            locationURI="popup:org.eclipse.papyrus.views.modelexplorer.modelexplorer.popup">
            <command
                commandId="org.eclipse.papyrusrt.codegen.papyrus.codegen">
                <visibleWhen checkEnabled="true"/>
            </command>
            <command
                  commandId="org.eclipse.papyrusrt.codegen.papyrus.codegen.regen">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
        </menuContribution>
    </extension>
    <extension
          point="org.eclipse.papyrus.infra.core.service">
       <service
             classname="org.eclipse.papyrusrt.codegen.papyrus.internal.ModelCloseService"
             id="org.eclipse.papyrusrt.codegen.papyrus.modelclose"
             priority="1"
             startKind="startup">
          <dependsOn
                serviceKeyRef="org.eclipse.papyrus.infra.core.editor.IMultiDiagramEditor">
          </dependsOn>
       </service>
    </extension>

    <extension
          point="org.eclipse.ui.bindings">
       <key
             commandId="org.eclipse.papyrusrt.codegen.papyrus.codegen"
             contextId="org.eclipse.papyrus.uml.diagram.composite.ui.diagramContext"
             schemeId="org.eclipse.papyrusrt.codegen.papyrus.keys"
             sequence="CTRL+R G">
       </key>
    </extension>
</plugin>
